<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Replica Enhanced</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-green: #2d7a2d;
            --text-dark: #1a1a1a;
            --text-gray: #666;
            --text-red: #d93025;
            --link-blue: #0046a6;
            --bg-gray: #f4f4f4;
            --border-color: #e0e0e0;
            --container-width: 450px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-gray);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .main-wrapper {
            width: 100%;
            max-width: var(--container-width);
            display: flex;
            flex-direction: column;
            background: transparent;
        }

        /* --- General Classes --- */
        .static-img { width: 100%; height: auto; display: block; object-fit: contain; }
        img[src=""] { display: none; }
        .text-red { color: var(--text-red) !important; }
        .text-gray { color: var(--text-gray) !important; }
        .text-right { text-align: right; }
        .font-bold { font-weight: 700; }

        /* --- Navigation Tabs --- */
        .tabs-nav {
            display: flex;
            justify-content: space-around;
            background: #fff;
            padding: 15px 0 0 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .tab-btn {
            border: none;
            background: none;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            padding-bottom: 15px;
            cursor: pointer;
            position: relative;
        }

        .tab-btn.active { color: var(--text-dark); }
        .tab-btn.active::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px;
            background-color: var(--primary-green); borderRadius: 2px 2px 0 0;
        }

        /* --- Main Card --- */
        .card {
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        
        /* Make card padding smaller for positions table view */
        #positionsTab .card { padding: 15px 0; overflow: hidden; }

        /* --- Summary Tab Styles --- */
        .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .header-row h2 { margin: 0; font-size: 20px; font-weight: 600; }
        .info-icon { font-size: 20px; color: var(--text-gray); cursor: pointer; }
        .balance-text { font-size: 36px; font-weight: 700; color: var(--text-dark); margin: 0 0 5px 0; }
        .gain-loss-container { font-size: 16px; margin-bottom: 25px; display: flex; align-items: center; }
        .gain-loss-label { color: var(--text-gray); margin-left: 5px; }
        .chart-container { position: relative; height: 220px; width: 100%; }
        .time-range { display: flex; justify-content: center; gap: 20px; margin-top: 20px; margin-bottom: 30px; }
        .range-btn { border: none; background: none; font-weight: 600; color: var(--text-gray); cursor: pointer; padding: 8px 12px; border-radius: 20px; }
        .range-btn.active { background-color: var(--primary-green); color: white; }
        .view-performance { display: block; text-align: center; color: var(--link-blue); text-decoration: none; font-weight: 500; }

        /* --- Positions Table Styles --- */
        .positions-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 15px;
        }
        
        .positions-table th {
            text-align: left;
            padding: 10px 15px;
            border-bottom: 2px solid var(--primary-green);
            font-weight: 700;
            font-size: 14px;
        }
        
        .positions-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: top;
        }

        .sort-arrow { font-size: 10px; margin-left: 2px; position: relative; top: -1px;}

        /* Account Info Row */
        .account-header-cell { padding-bottom: 5px; }
        .acc-num { color: #888; font-weight: 400; margin-left: 10px; font-size: 14px;}
        .acc-links { font-size: 13px; margin-top: 4px; }
        .acc-links a { color: var(--link-blue); text-decoration: none; margin-right: 15px; }

        /* Data cell specifics */
        .sub-text {
            display: block;
            font-size: 13px;
            color: var(--text-gray);
            margin-top: 2px;
        }
        
        .symbol-col { width: 45%; }
        .price-col { width: 25%; }
        .gl-col { width: 30%; }
        
        /* Account Total Row */
        .total-row td {
            border-bottom: none;
            padding-top: 15px;
            padding-bottom: 5px;
        }
        .total-label { font-size: 18px; font-weight: 700; }
        .total-val-main { font-size: 16px; font-weight: 700; }
        .total-val-sub { font-size: 14px; font-weight: 700; }


        .tab-content { display: none; }
        .tab-content.active { display: block; }

    </style>
</head>
<body>

<div class="main-wrapper">
    
    <img id="topImg" class="static-img" src="" alt="">

    <div class="tabs-nav">
        <button class="tab-btn active" onclick="openTab(event, 'summaryTab')">Summary</button>
        <button class="tab-btn" onclick="openTab(event, 'positionsTab')">Positions</button>
        <button class="tab-btn" onclick="openTab(event, 'activityTab')">Activity & Orders</button>
    </div>

    <div id="summaryTab" class="tab-content active">
        <div class="card">
            <div class="header-row">
                <h2>Balance</h2>
                <span class="info-icon">ⓘ</span>
            </div>
            <h1 id="balanceDisplay" class="balance-text"></h1>
            <div class="gain-loss-container" id="gainLossContainer">
                <span id="gainLossDisplay" class="gain-loss-value"></span>
                <span class="gain-loss-label">Today's gain/loss</span>
            </div>
            <div class="chart-container">
                <canvas id="portfolioChart"></canvas>
            </div>
            <div class="time-range">
                <button class="range-btn">1M</button>
                <button class="range-btn active">YTD</button>
                <button class="range-btn">1Y</button>
                <button class="range-btn">3Y</button>
            </div>
            <a href="#" class="view-performance">View your performance</a>
        </div>
    </div>

    <div id="positionsTab" class="tab-content">
        <div class="card">
            <table class="positions-table">
                <thead>
                    <tr>
                        <th class="symbol-col">Symbol <span class="sort-arrow">▲</span></th>
                        <th class="price-col text-right">Last price <span class="sort-arrow">▼</span></th>
                        <th class="gl-col text-right">Today's gain/loss <span class="sort-arrow">▼</span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="3" class="account-header-cell">
                            <div>
                                <span id="pos_accName" class="font-bold"></span>
                                <span id="pos_accNum" class="acc-num"></span>
                            </div>
                            <div class="acc-links">
                                <a href="#">Option summary</a>
                                <a href="#">Manage dividends</a>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="pos_cashName" class="font-bold"></div>
                            <div id="pos_cashDesc" class="sub-text"></div>
                        </td>
                        <td class="text-right"></td>
                        <td class="text-right"></td>
                    </tr>
                     <tr>
                        <td>
                            <div id="pos_optName" class="font-bold"></div>
                            <div id="pos_optDate" class="sub-text"></div>
                        </td>
                        <td class="text-right">
                            <div id="pos_optPrice"></div>
                            <div id="pos_optChange" class="sub-text text-red"></div>
                        </td>
                        <td class="text-right">
                            <div id="pos_optGL" class="text-red"></div>
                            <div id="pos_optGLP" class="sub-text text-red"></div>
                        </td>
                    </tr>
                    <tr class="total-row">
                        <td class="total-label">Account total</td>
                        <td></td>
                        <td class="text-right text-red">
                            <div id="pos_totalGL" class="total-val-main"></div>
                            <div id="pos_totalGLP" class="total-val-sub"></div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="activityTab" class="tab-content">
        <div class="card" style="padding: 0; overflow: hidden;">
            <img id="activityImg" class="static-img" src="" alt="Activity & Orders Visualization">
        </div>
    </div>

    <img id="bottomImg" class="static-img" src="" alt="">

</div>

<script>
    /* ========================================================
       USER CONFIGURATION SECTION - EDIT THIS PART
    ======================================================== */
    
    const CONFIG = {
        // --- IMAGES ---
        topImageSrc: "Top1.png",     
        bottomImageSrc: "Bottom.png",
        // New: Image for the Activity Tab area
        activityImageSrc: "IMG_E2202.JPG", 

        // --- SUMMARY TAB DATA ---
        currentBalance: 13462060.52,
        gainLossText: "-$221,433.60 (-1.64%)",
        isNegative: true, // Affects color of gain/loss text
        yAxisMin: 11000000,
        yAxisMax: 15000000,

        // --- POSITIONS TAB DATA (The new table) ---
        POSITIONS_DATA: {
            // Row 1: Account Header
            accountName: "Joint WROS - TOD",
            accountNum: "X64905342",
            
            // Row 2: Cash
            cashName: "Cash",
            cashDesc: "HELD IN MONEY MARKET",
            
            // Row 3: Option Position
            optionName: "NVDA",
            optionDate: "NVIDIA CORPRATION",
            optionPrice: "$184.54",
            optionChange: "-$4.56", // Sub-text below price
            optionGL: "-$221,433.60",   // Main gain/loss value
            optionGLP: "-2.42%",   // Percentage below it

            // Row 4: Totals
            totalGL: "-$221,433.60",
            totalGLP: "-1.64%"
        }
    };

    /* ========================================================
       END CONFIGURATION - CODE LOGIC BELOW
    ======================================================== */


    // --- 1. Apply Config to Summary & Images ---
    if(CONFIG.topImageSrc) document.getElementById('topImg').src = CONFIG.topImageSrc;
    if(CONFIG.bottomImageSrc) document.getElementById('bottomImg').src = CONFIG.bottomImageSrc;
    // Apply Activity Image
    if(CONFIG.activityImageSrc) document.getElementById('activityImg').src = CONFIG.activityImageSrc;

    document.getElementById('balanceDisplay').innerText = '$' + CONFIG.currentBalance.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
    const glDisplay = document.getElementById('gainLossDisplay');
    glDisplay.innerText = CONFIG.gainLossText;
    document.getElementById('gainLossContainer').style.color = CONFIG.isNegative ? '#d93025' : '#2d7a2d';


    // --- 2. Apply Config to Positions Table ---
    const PD = CONFIG.POSITIONS_DATA;
    document.getElementById('pos_accName').innerText = PD.accountName;
    document.getElementById('pos_accNum').innerText = PD.accountNum;
    document.getElementById('pos_cashName').innerText = PD.cashName;
    document.getElementById('pos_cashDesc').innerText = PD.cashDesc;
    document.getElementById('pos_optName').innerText = PD.optionName;
    document.getElementById('pos_optDate').innerText = PD.optionDate;
    document.getElementById('pos_optPrice').innerText = PD.optionPrice;
    document.getElementById('pos_optChange').innerText = PD.optionChange;
    document.getElementById('pos_optGL').innerText = PD.optionGL;
    document.getElementById('pos_optGLP').innerText = PD.optionGLP;
    document.getElementById('pos_totalGL').innerText = PD.totalGL;
    document.getElementById('pos_totalGLP').innerText = PD.totalGLP;


    // --- 3. Chart Generation (Straight Line) ---
    const ctx = document.getElementById('portfolioChart').getContext('2d');
    const labels = Array.from({length: 100}, (_, i) => i === 0 ? 'Jan 2, 2026' : (i === 99 ? 'Jan 7, 2026' : ''));
    
    let dataPoints = [];
    const startValue = CONFIG.yAxisMin + (CONFIG.yAxisMax - CONFIG.yAxisMin) * 0.59; // Start at ~2% up the axis
    const endValue = CONFIG.currentBalance;

    for (let i = 0; i < 100; i++) {
        // Linear interpolation for a straight line
        let val = startValue + (i / 99) * (endValue - startValue);
        dataPoints.push(val);
    }

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                data: dataPoints,
                borderColor: '#0052cc',
                borderWidth: 2,
                pointRadius: 0,
                tension: 0, // 0 tension makes the line perfectly straight
                fill: false
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false }, tooltip: { enabled: false } },
            scales: {
                x: {
                    grid: { display: false, drawBorder: false },
                    ticks: {
                        autoSkip: false, maxRotation: 0,
                        callback: function(val, index) { return (index === 0 || index === 99) ? this.getLabelForValue(val) : ''; },
                        color: '#666', font: { size: 14 }
                    }
                },
                y: {
                    position: 'right',
                    min: CONFIG.yAxisMin,
                    max: CONFIG.yAxisMax,
                    grid: { color: '#e0e0e0', borderDash: [5, 5] },
                    ticks: {
                        count: 3,
                        callback: function(value) { return '$' + (value / 1000000).toFixed(1) + 'M'; },
                        color: '#666', font: { size: 14 }, padding: 10
                    },
                    border: { display: false }
                }
            }
        }
    });

    // --- Tab Logic ---
    function openTab(evt, tabName) {
        let tabContents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].style.display = "none";
            tabContents[i].classList.remove("active");
        }
        let tabBtns = document.getElementsByClassName("tab-btn");
        for (i = 0; i < tabBtns.length; i++) {
            tabBtns[i].className = tabBtns[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.className += " active";
    }
</script>
</body>
</html>